!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="http://localhost:9000/js/",n(n.s=3)}([function(e,t,n){"use strict";n.d(t,"c",function(){return r}),n.d(t,"d",function(){return o}),n.d(t,"b",function(){return E}),n.d(t,"f",function(){return c}),n.d(t,"e",function(){return a}),n.d(t,"a",function(){return d});const r="@diff/portname/contentScript",o="@diff/content",E="@diff/background",c="@diff/frontend",a="@diff/background",i=e=>`@diff/${e}`,u=e=>({REQUEST:i(`${e}/request`),SUCCESS:i(`${e}/success`),FAILED:i(`${e}/failed`)}),d={AUTHENTICATION:u("authentication"),FETCH_USER_PREFERENCES:u("FETCH_USER_PREFERENCES"),STORE_USER_PREFERENCES:u("STORE_USER_PREFERENCES"),RUN_REQUEST:u("RUN_REQUEST"),LOGIN:u("LOGIN"),CACHE_TOKEN:u("CACHE_TOKEN"),FETCH_CACHE_TOKEN:u("FETCH_CACHE_TOKEN")}},function(e,t,n){"use strict";n.d(t,"c",function(){return o}),n.d(t,"h",function(){return E}),n.d(t,"e",function(){return c}),n.d(t,"g",function(){return a}),n.d(t,"f",function(){return i}),n.d(t,"j",function(){return u}),n.d(t,"i",function(){return d}),n.d(t,"a",function(){return s}),n.d(t,"b",function(){return f}),n.d(t,"d",function(){return S});var r=n(0);const o=(e,t,n)=>Object.assign({},{source:t,dest:n},e),E=()=>({type:r.a.RUN_REQUEST.REQUEST}),c=()=>({type:r.a.FETCH_USER_PREFERENCES.REQUEST}),a=e=>({type:r.a.FETCH_USER_PREFERENCES.SUCCESS,payload:{preferences:{...e}}}),i=e=>({type:r.a.FETCH_USER_PREFERENCES.FAILED,meta:{err:e}}),u=()=>({type:r.a.STORE_USER_PREFERENCES.SUCCESS,payload:{}}),d=e=>({type:r.a.STORE_USER_PREFERENCES.FAILED,meta:{err:e}}),s=e=>({type:r.a.CACHE_TOKEN.FAILED,meta:{err:e}}),f=()=>({type:r.a.CACHE_TOKEN.SUCCESS}),S=e=>({type:r.a.FETCH_CACHE_TOKEN.SUCCESS,payload:{token:e}})},,function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(1);const E=e=>new Promise((t,n)=>{chrome.storage.local.get([e],e=>{t(0===Object.keys(e).length?null:e)})}),c=(e,t)=>{const n={[e]:t};return new Promise((e,t)=>{chrome.storage.local.set(n,()=>{e()})})};var a={[r.a.FETCH_USER_PREFERENCES.REQUEST]:(e,t)=>{E("_DIFF_PREFERENCES").then(n=>t(e,o.g(n))).catch(n=>t(e,o.f(n.message)))},[r.a.STORE_USER_PREFERENCES.REQUEST]:(e,t,{payload:{preferences:n}})=>{c("_DIFF_PREFERENCES",n).then(()=>t(e,o.j())).catch(n=>t(e,o.i(n.message)))},[r.a.CACHE_TOKEN.REQUEST]:(e,t,n)=>{(e=>c("token",e))(n.payload.token).then(()=>t(e,o.b())).catch(()=>t(e,o.a("Not able to save")))},[r.a.FETCH_CACHE_TOKEN.REQUEST]:(e,t,n)=>{E("token").then(n=>t(e,o.d(n.token))).catch(()=>t(e,o.d("No token available")))}};const i={},u=e=>(t,n)=>{const E=(e=>i[e])(t);E?E.postMessage(Object(o.c)(n,r.b,e)):console.error("Unable to post message")};chrome.runtime.onConnect.addListener(e=>{if(e.name===r.c){const t=(e=>{const t=e.sender.tab.id;return t in i&&console.warn("Overwriting tab id",t),i[t]=e,e.sender.tab.id})(e);e.onMessage.addListener((e=>t=>{const n=u(r.d),o=u(r.f);t.source===r.d&&t.type in a?a[t.type](e,n,t):t.source===r.f&&t.type in a?a[t.type](e,o,t):n(e,{err:"No action found for request"})})(t)),e.onDisconnect.addListener((e=>()=>{e in i&&delete i[e]})(t))}}),chrome.runtime.onInstalled.addListener(()=>{chrome.contextMenus.create({id:"log-selection",title:"Inspect with diff",contexts:["all"]})}),chrome.contextMenus.onClicked.addListener(async(e,t)=>(((e,t)=>{u(r.d)(e,t)})(t.id,Object(o.h)()),!0))}]);